<div id="site-content">
  <div class="container">
    <div class="row">
      <div class="col-md-12 backgroundClear">
        <div  id="site-background">
          <h1>Wizyty przypisane do konta pracownika</h1>
          <ng-container *ngIf="visits.length == 0">
            Brak wizyt w historii.
          </ng-container>
          <ng-container *ngIf="visits.length != 0">
            <table class="table">
              <thead>
              <tr>
                <td>Lp.</td>
                <td>Marka</td>
                <td>Model</td>
                <td>Numer rejestracyjny</td>
                <td>Data wizyty</td>
                <td></td>
              </tr>
              </thead>
              <tr *ngFor="let visit of visits;  let i = index">
                <td>{{i}}</td>
                <td>{{visit.car.brandName}}</td>
                <td>{{visit.car.model}}</td>
                <td>{{visit.car.registrationNumber}}</td>
                <td>{{visit.visitDate}}</td>
                <ng-container *ngIf="visit.status == 'ACCEPTED'">
                  <td><button (click)="changeStatus(visit.id, 'in progress')">Potwierdź odbiór</button></td>
                </ng-container>
                <ng-container *ngIf="visit.status == 'IN_PROGRESS'">
                  <td><button >Edytuj</button></td>
                  <td><button (click)="changeStatus(visit.id, 'for pickup')">Do odbioru</button></td>
                </ng-container>
                <ng-container *ngIf="visit.status == 'FOR_PICKUP'">
                  <td><button (click)="changeStatus(visit.id, 'finished')">Odebrano</button></td>
                </ng-container>

              </tr>
            </table>
          </ng-container>
        </div>
      </div>
    </div>
  </div>
</div>


